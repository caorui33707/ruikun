{extend name="platform/base" /}
{block name="main"}
<section class="panel panel-default">
	<header class="panel-heading font-bold"> 代理商配置 </header>
	<div class="panel-body">
		<form class="form-horizontal" id="user_form" name="form">
			<div class="form-group">
				<label class="col-sm-2 control-label">个人->个人</label>
				<div class="col-md-2">
					<input type="number" class="form-control" style="width: 80px" id="agent1" name="admin_name" value="{$agent_list.agent1}" required>
				</div>
				<label class="col-md-8 error" for="agent1" ></label>
			</div>
			<div class="line line-dashed line-lg pull-in"></div>
			<div class="form-group">
					<label class="col-sm-2 control-label">个人->代理公司</label>
					<div class="col-sm-2">
						<input type="number" name="user_password" style="width: 80px" id="agent2" class="form-control" value="{$agent_list.agent2}" required>
					</div>
				<label class="col-md-8 error" for="agent2" ></label>
			</div>


			<div class="line line-dashed line-lg pull-in"></div>
			<div class="form-group">
				<label class="col-sm-2 control-label">代理公司->省级代理</label>
				<div class="col-sm-2">
					<input type="number" name="user_password" style="width: 80px" id="agent3" class="form-control" value="{$agent_list.agent3}" required>
				</div>
				<label class="col-md-8 error" for="agent3" ></label>
			</div>
			<div class="line line-dashed line-lg pull-in"></div>
			<div class="form-group">
				<label class="col-sm-2 control-label">代理公司->市级代理</label>
				<div class="col-sm-2">
					<input type="number" name="user_password" style="width: 80px" id="agent4" class="form-control" value="{$agent_list.agent4}" required>
				</div>
				<label class="col-md-8 error" for="agent4" ></label>
			</div>
			<div class="line line-dashed line-lg pull-in"></div>
			<div class="form-group">
				<label class="col-sm-2 control-label">代理公司->县（区）级代理</label>
				<div class="col-sm-2">
					<input type="number" name="user_password" style="width: 80px" id="agent5" class="form-control" value="{$agent_list.agent5}" required>
				</div>
				<label class="col-md-8 error" for="agent5" ></label>
			</div>
			<div class="line line-dashed line-lg pull-in"></div>
			<div class="form-group">
				<div class="col-sm-4 col-sm-offset-2">
					<button type="submit" class="btn btn-primary">保存</button>
<!-- 					<a href="javascript:void(0);" onclick="addUserAjax()" class="btn btn-primary">保存</a> -->
				</div>
			</div>
		</form>
	</div>
</section>
<script>
$().ready(function() {
	$("#user_form").validate({
		submitHandler:function(){
			addUserAjax();
		}
	});
});
	/**
	 *添加代理商配置
	 **/
	function addUserAjax() {
	    var val = new Array();

        agent1= $('#agent1').val();
        agent2 = $('#agent2').val();
        agent3 = $('#agent3').val();
        agent4 = $('#agent4').val();
        agent5 = $('#agent5').val();
        var data = {
            agent1:agent1,
            agent2:agent2,
            agent3:agent3,
            agent4:agent4,
            agent5:agent5
		};

		$.ajax({
			type : "post",
			url : "{:__URL('PLATFORM_MAIN/config/agentSave')}",
            dataType: "json",
            data : data,
            traditional: true,//这里设为true就可以了
			async : true,
			success : function(data) {  console.log(data);
				if (data['code'] > 0) {
					location.href = "{:__URL('PLATFORM_MAIN/config/agentSave')}";
				}
			}
		});
	}
</script>
{/block}